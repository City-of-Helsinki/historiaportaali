!function(){function n(o){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(o)}!function(o,e,t,i){var l;e.behaviors.map={attach:function(n,e){var t=this;i("map","body").length&&o(document).on("leafletMapInit",(function(n,o,e,i){if(i.startsWith("leaflet-map-view-combined-map-block")){l=e;var r=t.getUrlParameter("id");t.bindPopupPositioning(),r&&t.openPopupByNid(r)}})),t.bindFilterToggle(n)},bindFilterToggle:function(n){$filterToggleBtn=o(i("button",".exposed-filters .toggle-filters-btn")),$filterContainer=o(".exposed-filters .exposed-filters__container"),$filterToggleBtn.on("click",(function(){$filterContainer.slideToggle(150),$filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")?($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")):($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down"))}))},openPopupByNid:function(n){var o=null,t=!1;l.eachLayer((function(e){var i,l;(null===(i=e.options)||void 0===i?void 0:i.entity_id)==n&&(null!==(l=e._popup)&&void 0!==l&&l._content.includes('ajax-entity="media')&&(o=e,t=!0));e._group&&!o&&e.getAllChildMarkers().forEach((function(e){var i,l;(null===(i=e.options)||void 0===i?void 0:i.entity_id)==n&&(null!==(l=e._popup)&&void 0!==l&&l._content.includes('ajax-entity="media')&&(o=e,t=!0))}))})),o&&e.behaviors.map.zoomToLayer(o,t)},zoomToLayer:function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)return!1;if(o&&n.__parent._group.zoomToShowLayer(n,(function(){n.openPopup()})),!o){l.on("moveend",(function(){n.openPopup()})),l.on("popupopen",(function(){l.off("moveend")}));l.setView(n._latlng,15)}},bindPopupPositioning:function(){l.on("popupopen",(function(n){var o=l.project(n.target._popup._latlng);o.y-=n.target._popup._container.clientHeight,l.panTo(l.unproject(o),{animate:!0})}))},getUrlParameter:function(o){var e,t,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++)if((e=i[t].split("="))[0]===o)return void 0===n(e[1])||decodeURIComponent(e[1]);return!1}}}(jQuery,Drupal,drupalSettings,once)}();