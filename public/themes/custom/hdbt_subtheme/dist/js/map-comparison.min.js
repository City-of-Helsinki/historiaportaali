!function(a,n,e,t){var o,i;n.behaviors.mapComparison={attach:function(n,e){var t=this;a(document).on("leafletMapInit",(function(a,e,i,p){o=i,t.bindCompareButton(n)}))},bindCompareButton:function(n){var e=this,o=a(".views--combined-map",n);a(t("comparison-button",".map-controls__control #map-comparison-btn",n)).on("click",(function(){o.is(".comparison-enabled")?e.disableMapComparison():e.enableMapComparison()}))},enableMapComparison:function(){var n=this;a(".views--combined-map").addClass("comparison-enabled"),a("#comparison-map-container").fadeIn(150),o.invalidateSize();var e="comparison-map-container";n.initMap(e)&&(n.attachPopupListeners(e),n.syncMaps())},initMap:function(t){var o=a("#".concat(t)),p=Object.values(e.leaflet)[0];if(!p)return!1;var s=p.map;return s.settings.mapName="comparison-map",void 0===o.data("leaflet")&&(o.data("leaflet",new n.Leaflet(L.DomUtil.get(t),t,s)),i=o.data("leaflet").lMap,o.data("leaflet").lMap.zoomControl.remove(),p.features.length>0&&(o.data("leaflet").markers={},o.data("leaflet").features={},o.data("leaflet").add_features(p.features,!0))),!0},attachPopupListeners:function(t){a("#".concat(t)).data("leaflet").lMap.on("popupopen",(function(t){var o=t.popup._contentNode,i=a("[data-leaflet-ajax-popup]",o);if(i.length){var p=i.data("leaflet-ajax-popup");n.ajax({url:p}).execute().done((function(){t.popup.setContent(o.innerHTML),t.popup.update(),n.attachBehaviors(o,e)}))}}))},disableMapComparison:function(){a(".views--combined-map").removeClass("comparison-enabled"),a("#comparison-map-container").fadeOut(150),this.unSyncMaps(),o.invalidateSize()},syncMaps:function(){o.isSynced(i)||o.sync(i),i.isSynced(o)||i.sync(o)},unSyncMaps:function(){o.isSynced(i)&&o.unsync(i),i.isSynced(o)&&i.unsync(o)}}}(jQuery,Drupal,drupalSettings,once);