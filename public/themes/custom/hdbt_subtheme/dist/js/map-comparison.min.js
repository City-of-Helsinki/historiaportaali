(()=>{var a=Object.defineProperty;var e=(e,t)=>a(e,"name",{value:t,configurable:true});((a,Drupal,drupalSettings,t)=>{let n;let o;Drupal.behaviors.mapComparison={attach:e(function(e,t){let o=this;a(document).on("leafletMapInit",function(a,t,i,p){n=i;o.bindCompareButton(e)})},"attach"),bindCompareButton:e(function(e){let n=this;let o=a(".views--combined-map",e);let i=a(t("comparison-button",".map-controls__control #map-comparison-btn",e));i.on("click",function(){if(!o.is(".comparison-enabled")){n.enableMapComparison()}else{n.disableMapComparison()}})},"bindCompareButton"),enableMapComparison:e(function(){let e=this;let t=a(".views--combined-map");t.addClass("comparison-enabled");a("#comparison-map-container").fadeIn(150);n.invalidateSize();const o="comparison-map-container";const i=e.initMap(o);if(i){e.attachPopupListeners(o);e.syncMaps()}},"enableMapComparison"),initMap:e(function(e){let t=a(`#${e}`);const n=Object.values(drupalSettings.leaflet)[0];if(!n){return false}let i=n.map;i.settings.mapName="comparison-map";if(t.data("leaflet")===void 0){t.data("leaflet",new Drupal.Leaflet(L.DomUtil.get(e),e,i));o=t.data("leaflet").lMap;t.data("leaflet").lMap.zoomControl.remove();if(n.features.length>0){t.data("leaflet").markers={};t.data("leaflet").features={};t.data("leaflet").add_features(n.features,true)}}return true},"initMap"),attachPopupListeners:e(function(e){let t=a(`#${e}`);t.data("leaflet").lMap.on("popupopen",function(e){let t=e.popup._contentNode;let n=a("[data-leaflet-ajax-popup]",t);if(n.length){let a=n.data("leaflet-ajax-popup");Drupal.ajax({url:a}).execute().done(function(){e.popup.setContent(t.innerHTML);e.popup.update();Drupal.attachBehaviors(t,drupalSettings)})}})},"attachPopupListeners"),disableMapComparison:e(function(){let e=this;let t=a(".views--combined-map");t.removeClass("comparison-enabled");a("#comparison-map-container").fadeOut(150);e.unSyncMaps();n.invalidateSize()},"disableMapComparison"),syncMaps:e(function(){if(!n.isSynced(o)){n.sync(o)}if(!o.isSynced(n)){o.sync(n)}},"syncMaps"),unSyncMaps:e(function(){if(n.isSynced(o)){n.unsync(o)}if(o.isSynced(n)){o.unsync(n)}},"unSyncMaps")}})(jQuery,Drupal,drupalSettings,once)})();