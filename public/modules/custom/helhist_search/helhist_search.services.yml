services:
  helhist_search.search_path_resolver:
    class: Drupal\helhist_search\SearchPathResolver
    arguments: ['@config.factory']

  helhist_search.search_link_generator:
    class: Drupal\helhist_search\SearchLinkGenerator
    arguments: ['@helhist_search.search_path_resolver', '@string_translation']

  helhist_search.twig_extension:
    class: Drupal\helhist_search\Twig\SearchLinkExtension
    arguments: ['@helhist_search.search_link_generator']
    tags:
      - { name: twig.extension }

  helhist_search.csp_elastic_proxy_subscriber:
    class: Drupal\helhist_search\EventSubscriber\CspElasticProxySubscriber
    arguments:
      - '@config.factory'
      - '@module_handler'
      - '@helfi_api_base.environment_resolver'
      - '@csp.policy_helper'
    tags:
      - { name: event_subscriber }

