((a,e,t)=>{e.behaviors.mapControls={attach:function(e,t){var r=this;a(document).on("leaflet.map",(function(a,e,t,s){r.bindEraControls(t)}))},bindEraControls:function(e){var t=this;let r=a(".map-controls__map-era .map-controls__map-era-item");r.on("click",(function(s){let i=a(s.target).data("map-era");mapApi=a(s.target).data("map-api"),mapWMSTitle=a(s.target).data("map-wms-title"),t.loadEraLayer(e,i,mapApi,mapWMSTitle),r.removeClass("active"),a(s.target).addClass("active")}))},loadEraLayer:function(a,e,t,r){this.removeMapEraLayers(a);let s=this.getMapApiUrl(t);r&&"present"!==e&&L.tileLayer.wms(s,{layers:r,format:"image/png",transparent:!0}).addTo(a)},removeMapEraLayers:function(a){let e=Object.entries(a._layers).filter((([a,e])=>e.hasOwnProperty("wmsParams")));e.length>0&&e.forEach((a=>a[1].remove()))},getMapApiUrl:function(a){switch(a){case"kartta_hel_fi":return"https://kartta.hel.fi/ws/geoserver/avoindata/wms";case"geoserver_hel_fi":return"https://geoserver.hel.fi/geoserver/ows";default:return""}}}})(jQuery,Drupal,drupalSettings);