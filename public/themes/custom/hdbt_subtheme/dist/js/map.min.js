!function(){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}!function(e,o,t,i){var r,a;o.behaviors.map={attach:function(n,o){var t=this;i("map","body").length&&e(document).on("leafletMapInit",(function(n,o,i,l){if(l.startsWith("leaflet-map-view-combined-map-block")){r=i,a=e("#"+l);var s=t.getUrlParameter("id");t.bindPopupPositioning(),s&&setTimeout((function(){t.openPopupByNid(s)}),300)}})),t.bindFilterToggle(n)},bindFilterToggle:function(n){$filterToggleBtn=e(i("button",".exposed-filters .toggle-filters-btn")),$filterContainer=e(".exposed-filters .exposed-filters__container"),$filterToggleBtn.on("click",(function(){$filterContainer.slideToggle(150),$filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")?($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")):($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down"))}))},openPopupByNid:function(n){if(r&&a&&n){var e=a.data("leaflet");if(null!=e&&e.markers){var o=String(n),t=e.markers[o];if(!t){var i=Object.keys(e.markers).find((function(n){return n.startsWith(o+"-")}));i&&(t=e.markers[i])}if(!t)return console.warn("Map: No marker found ID",o),void console.log("Available marker IDs:",Object.keys(e.markers).map((function(n){return n.replace("-0","")})));var l=!1;r.eachLayer((function(n){n._group&&"function"==typeof n.getAllChildMarkers&&n.getAllChildMarkers().includes(t)&&(l=!0)})),this.zoomToLayer(t,l)}}},zoomToLayer:function(n){var e;if(!n||!r)return!1;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&null!==(e=n.__parent)&&void 0!==e&&e._group)return n.__parent._group.zoomToShowLayer(n,(function(){n.openPopup()})),!0;var o=function(){n.openPopup(),r.off("moveend",o)};return r.on("moveend",o),r.setView(n._latlng,15),!0},bindPopupPositioning:function(){r.on("popupopen",(function(n){var e=r.project(n.target._popup._latlng);e.y-=n.target._popup._container.clientHeight,r.panTo(r.unproject(e),{animate:!0})}))},getUrlParameter:function(e){var o,t,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++)if((o=i[t].split("="))[0]===e)return void 0===n(o[1])||decodeURIComponent(o[1]);return!1}}}(jQuery,Drupal,drupalSettings,once)}();