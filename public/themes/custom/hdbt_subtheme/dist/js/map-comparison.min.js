!function(a,n,e){var t,o;n.behaviors.mapComparison={attach:function(n,e){var o=this;a(document).on("leaflet.map",(function(a,e,i,p){t=i,o.bindCompareButton(n)}))},bindCompareButton:function(n){var e=this,t=a(".views--combined-map",n);a(".map-controls__control #map-comparison-btn",n).once("comparison-button").on("click",(function(){t.is(".comparison-enabled")?e.disableMapComparison():e.enableMapComparison()}))},enableMapComparison:function(){var n=this;a(".views--combined-map").addClass("comparison-enabled"),a("#comparison-map-container").fadeIn(150),t.invalidateSize();var e="comparison-map-container";n.initMap(e)&&(n.attachPopupListeners(e),n.syncMaps())},initMap:function(t){var i=a("#".concat(t)),p=Object.values(e.leaflet)[0];if(!p)return!1;var s=p.map;return s.settings.mapName="comparison-map",s.settings.zoomControl=!1,void 0===i.data("leaflet")&&(i.data("leaflet",new n.Leaflet(L.DomUtil.get(t),t,s)),o=i.data("leaflet").lMap,p.features.length>0&&(n.Leaflet[t].markers={},n.Leaflet[t].features={},i.data("leaflet").add_features(t,p.features,!0))),!0},attachPopupListeners:function(t){n.Leaflet[t].lMap.on("popupopen",(function(t){var o=t.popup._contentNode,i=a("[data-leaflet-ajax-popup]",o);if(i.length){var p=i.data("leaflet-ajax-popup");n.ajax({url:p}).execute().done((function(){t.popup.setContent(o.innerHTML),t.popup.update(),n.attachBehaviors(o,e)}))}}))},disableMapComparison:function(){a(".views--combined-map").removeClass("comparison-enabled"),a("#comparison-map-container").fadeOut(150),this.unSyncMaps(),t.invalidateSize()},syncMaps:function(){t.isSynced(o)||t.sync(o),o.isSynced(t)||o.sync(t)},unSyncMaps:function(){t.isSynced(o)&&t.unsync(o),o.isSynced(t)&&o.unsync(t)}}}(jQuery,Drupal,drupalSettings);