!function(){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}!function(e,t,o,i){var r,a;t.behaviors.map={attach:function(n,t){var o=this;i("map","body").length&&e(document).on("leafletMapInit",(function(n,t,i,l){if(l.startsWith("leaflet-map-view-combined-map-block")){r=i,a=e("#"+l);var s=o.getUrlParameter("id");o.bindPopupPositioning(),s&&setTimeout((function(){o.openPopupByNid(s)}),300)}})),o.bindFilterToggle(n)},bindFilterToggle:function(n){$filterToggleBtn=e(i("button",".exposed-filters .toggle-filters-btn")),$filterContainer=e(".exposed-filters .exposed-filters__container"),$filterToggleBtn.on("click",(function(){$filterContainer.slideToggle(150),$filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")?($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")):($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down"))}))},openPopupByNid:function(n){if(r&&a&&n){var e=a.data("leaflet");if(null!=e&&e.markers){var t=String(n),o=e.markers[t];if(!o){var i=Object.keys(e.markers).find((function(n){return n.startsWith(t+"-")}));i&&(o=e.markers[i])}if(!o)return console.warn("Map: No marker found ID",t),void console.log("Available marker IDs:",Object.keys(e.markers).map((function(n){return n.replace("-0","")})));var l=!1;r.eachLayer((function(n){n._group&&"function"==typeof n.getAllChildMarkers&&n.getAllChildMarkers().includes(o)&&(l=!0)})),this.zoomToLayer(o,l)}}},zoomToLayer:function(n){var e;if(!n||!r)return!1;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&null!==(e=n.__parent)&&void 0!==e&&e._group)return n.__parent._group.zoomToShowLayer(n,(function(){n.openPopup()})),!0;var t=function(){n.openPopup(),r.off("moveend",t)};return r.on("moveend",t),r.setView(n._latlng,15),!0},bindPopupPositioning:function(){var n=this;r.on("popupopen",(function(e){var t=r.project(e.target._popup._latlng);t.y-=e.target._popup._container.clientHeight,r.panTo(r.unproject(t),{animate:!0}),n.updateUrlWithEntityId(e.target._popup._source)})),r.on("popupclose",(function(e){n.clearUrlEntityId()}))},updateUrlWithEntityId:function(n){if(n&&a){var e=a.data("leaflet");if(null!=e&&e.markers){var t=Object.keys(e.markers).find((function(t){return e.markers[t]===n}));if(t){var o=t.replace("-0",""),i=new URL(window.location);i.searchParams.set("id",o),window.history.replaceState({},"",i)}}}},clearUrlEntityId:function(){var n=new URL(window.location);n.searchParams.delete("id"),window.history.replaceState({},"",n)},getUrlParameter:function(e){var t,o,i=window.location.search.substring(1).split("&");for(o=0;o<i.length;o++)if((t=i[o].split("="))[0]===e)return void 0===n(t[1])||decodeURIComponent(t[1]);return!1}}}(jQuery,Drupal,drupalSettings,once)}();