(()=>{var e=Object.defineProperty;var n=(n,o)=>e(n,"name",{value:o,configurable:true});((e,Drupal,drupalSettings,o)=>{let t;Drupal.behaviors.map={attach:n(function(n,i){let a=this;if(o("map","body").length){e(document).on("leafletMapInit",function(e,n,o,i){if(i.startsWith("leaflet-map-view-combined-map-block")){t=o;const e=a.getUrlParameter("id");a.bindPopupPositioning();if(e){a.openPopupByNid(e)}}})}a.bindFilterToggle(n)},"attach"),bindFilterToggle:n(function(n){$filterToggleBtn=e(o("button",".exposed-filters .toggle-filters-btn"));$filterContainer=e(".exposed-filters .exposed-filters__container");$filterToggleBtn.on("click",function(){$filterContainer.slideToggle(150);if($filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")){$filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down");$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")}else{$filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up");$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down")}})},"bindFilterToggle"),openPopupByNid:n(function(e){let n=null;let o=false;t.eachLayer(t=>{if(t.options?.entity_id==e){if(t._popup?._content.includes('ajax-entity="media')){n=t;o=true}}if(t._group&&!n){const i=t.getAllChildMarkers();i.forEach(t=>{if(t.options?.entity_id==e){if(t._popup?._content.includes('ajax-entity="media')){n=t;o=true}}})}});if(n){Drupal.behaviors.map.zoomToLayer(n,o)}},"openPopupByNid"),zoomToLayer:n(function(e,n=false){if(!e){return false}if(n){e.__parent._group.zoomToShowLayer(e,()=>{e.openPopup()})}if(!n){t.on("moveend",function(){e.openPopup()});t.on("popupopen",function(){t.off("moveend")});const n=15;t.setView(e._latlng,n)}},"zoomToLayer"),bindPopupPositioning:n(function(){t.on("popupopen",function(e){var n=t.project(e.target._popup._latlng);n.y-=e.target._popup._container.clientHeight;t.panTo(t.unproject(n),{animate:true})})},"bindPopupPositioning"),getUrlParameter:n(function(e){var n=window.location.search.substring(1),o=n.split("&"),t,i;for(i=0;i<o.length;i++){t=o[i].split("=");if(t[0]===e){return typeof t[1]===void 0?true:decodeURIComponent(t[1])}}return false},"getUrlParameter")}})(jQuery,Drupal,drupalSettings,once)})();