!function(){function n(o){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(o)}!function(o,e,t){var i;e.behaviors.map={attach:function(n,e){var t=this;o(document).on("leaflet.map",(function(n,o,e,l){if("leaflet-map-view-combined-map-page"==l){i=e;var r=t.getUrlParameter("id");t.bindPopupPositioning(),r&&t.openPopupByNid(r)}})),t.bindFilterToggle(n)},bindFilterToggle:function(n){$filterToggleBtn=o(".exposed-filters .toggle-filters-btn button",n).once(),$filterContainer=o(".exposed-filters .exposed-filters__container"),$filterToggleBtn.on("click",(function(){$filterContainer.slideToggle(150),$filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")?($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")):($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down"))}))},openPopupByNid:function(n){var o=null,e=15;i.eachLayer((function(t){var i;((null===(i=t.options)||void 0===i?void 0:i.entity_id)==n&&(o=t),t._group&&!o)&&t.getAllChildMarkers().forEach((function(t){var i;(null===(i=t.options)||void 0===i?void 0:i.entity_id)==n&&(o=t,e=18)}))})),o&&(console.log(o._latlng),i.setView(o._latlng,e),i.on("moveend",(function(){o.openPopup()})),i.on("popupopen",(function(){i.off("moveend")})))},bindPopupPositioning:function(){i.on("popupopen",(function(n){var o=i.project(n.target._popup._latlng);o.y-=n.target._popup._container.clientHeight,i.panTo(i.unproject(o),{animate:!0})}))},getUrlParameter:function(o){var e,t,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++)if((e=i[t].split("="))[0]===o)return void 0===n(e[1])||decodeURIComponent(e[1]);return!1}}}(jQuery,Drupal,drupalSettings)}();