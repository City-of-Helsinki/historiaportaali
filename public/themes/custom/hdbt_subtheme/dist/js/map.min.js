!function(){function n(o){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(o)}!function(o,e,t){var i;e.behaviors.map={attach:function(n,e){var t=this;o(document).on("leaflet.map",(function(n,o,e,r){if("leaflet-map-view-combined-map-block"==r){i=e;var l=t.getUrlParameter("id");t.bindPopupPositioning(),l&&t.openPopupByNid(l)}})),t.bindFilterToggle(n)},bindFilterToggle:function(n){$filterToggleBtn=o(".exposed-filters .toggle-filters-btn button",n).once(),$filterContainer=o(".exposed-filters .exposed-filters__container"),$filterToggleBtn.on("click",(function(){$filterContainer.slideToggle(150),$filterContainer.is(":visible")&&$filterToggleBtn.find("span.hds-icon").hasClass("hds-icon--angle-down")?($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-down"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-up")):($filterToggleBtn.find("span.hds-icon").removeClass("hds-icon--angle-up"),$filterToggleBtn.find("span.hds-icon").addClass("hds-icon--angle-down"))}))},openPopupByNid:function(n){var o=null,t=!1;i.eachLayer((function(e){var i;((null===(i=e.options)||void 0===i?void 0:i.entity_id)==n&&(o=e),e._group&&!o)&&e.getAllChildMarkers().forEach((function(e){var i;(null===(i=e.options)||void 0===i?void 0:i.entity_id)==n&&(o=e,t=!0)}))})),o&&e.behaviors.map.zoomToLayer(o,t)},zoomToLayer:function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)return!1;if(o&&n.__parent._group.zoomToShowLayer(n,(function(){n.openPopup()})),!o){i.on("moveend",(function(){n.openPopup()})),i.on("popupopen",(function(){i.off("moveend")}));var e=15;i.setView(n._latlng,e)}},bindPopupPositioning:function(){i.on("popupopen",(function(n){var o=i.project(n.target._popup._latlng);o.y-=n.target._popup._container.clientHeight,i.panTo(i.unproject(o),{animate:!0})}))},getUrlParameter:function(o){var e,t,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++)if((e=i[t].split("="))[0]===o)return void 0===n(e[1])||decodeURIComponent(e[1]);return!1}}}(jQuery,Drupal,drupalSettings)}();